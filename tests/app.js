var VM = require('ethereumjs-vm')

var vm = new VM()

var code = '7f4e616d65526567000000000000000000000000000000000000000000000000003055307f4e616d6552656700000000000000000000000000000000000000000000000000557f436f6e666967000000000000000000000000000000000000000000000000000073661005d2720d855f1d9976f88bb10c1a3398c77f5573661005d2720d855f1d9976f88bb10c1a3398c77f7f436f6e6669670000000000000000000000000000000000000000000000000000553360455560df806100c56000396000f3007f726567697374657200000000000000000000000000000000000000000000000060003514156053576020355415603257005b335415603e5760003354555b6020353360006000a233602035556020353355005b60007f756e72656769737465720000000000000000000000000000000000000000000060003514156082575033545b1560995733335460006000a2600033545560003355005b60007f6b696c6c00000000000000000000000000000000000000000000000000000000600035141560cb575060455433145b1560d25733ff5b6000355460005260206000f3'

var code2 = '608060405260043610603e5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166360fe47b181146043575b600080fd5b348015604e57600080fd5b506058600435605a565b005b801515606757506001606d565b60008190555b505600a165627a7a723058202c0358c0a4f7ede65db3a4dc5ca453641ffbbab4131aac779c91856f073288f30029'

var input1_code2 = '0x60fe47b10000000000000000000000000000000000000000000000000000000000000038'
var input2_code2 = '0x60fe47b10000000000000000000000000000000000000000000000000000000000000000'

vm.on('step', function (data) {
    console.log(`[VM ] -> PC:${data.pc} ${data.opcode.name}`)
  })
  

vm.runCode({
    code: Buffer.from(code2, 'hex'), // code needs to be a Buffer
    data: Buffer.from('42345234234','hex'),
    gasLimit: Buffer.from('ffffffff', 'hex')
  }, function(err, results){
    console.log('returned: ' + results.return.toString('hex'));
  })